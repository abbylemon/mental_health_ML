{% extends 'layout.html' %} {% block body %}

<h1 class="page-title">Natural Language Processing</h1>
<div class="row">
  <div class="col-md-12">
    <h2 class="mt-3">Sentiment Analysis of Mental Health Conversations wsith Employer</h2>
    {% if message %}
    <p class="message">{{ message | safe }}</p>
    {% endif %}
    <form action="/nlp" method="POST">
      <div class="form-group mt-3">
        <h5>Describe the conversation you had with your employer about your mental health, including their reactions and
          what actions were taken to address your mental health.</h5>
        <textarea class="form-control" name="comments" rows="3"></textarea>
      </div>
      <input type="submit" value="Submit" class="btn btn-dark submit-btn" />
    </form>
  </div>
</div>
<div class="row">
  <div class="col-md-6 mt-5">
    {% if score %}
    <table class="table table-dark">
      <thead>
        <tr class="table-header-row">
          <th class="table-head">Sentiment Metric</th>
          <th class="table-head">Score</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td scope="row">Positive</th>
          <td>{{ score.pos | safe }}</td>
        </tr>
        <tr>
          <td scope="row">Negative</th>
          <td>{{ score.neg | safe }}</td>
        </tr>
        <tr>
          <td scope="row">Neutral</th>
          <td>{{ score.neu }}</td>
        </tr>
        <tr>
          <td scope="row">Compound</th>
          <td>{{ score.compound }}</td>
        </tr>
      </tbody>
    </table>
    {% endif %}
  </div>
  {% if score %}
  <div class="col-md-6 mt-5">
    <p>Represents the proportion of text that is positive, negative, or neutral (should all add up to 1).</p>
    <p><b>Positive sentiment:</b> compound score greater than or equal to 0.05.</p>
    <p><b>Neutral sentment:</b> compound score greater than -0.05 and less than 0.05.</p>
    <p><b>Negative Sentiment:</b> compound score greater less than or equal to -0.05.</p>
    <p>For more information about how a sentence is scored to classify it as either positive, negative, or neutral, go
      <a href="https://github.com/cjhutto/vaderSentiment#about-the-scoring" target="_blank">here</a>.</p>
  </div>
  {% endif %}
</div>
<div class="row">
  <div class="col-md-12">
    <h3>Sentiment Scores for Survey Results from 2017-2019</h3>
    <img src="../static/images/conversations_word_cloud.png" style="width: 100%" />
    <table class="table table-responsive table-striped mt-3 table-hover table-dark" id="sentiment-scores-table">
      <thead class="thead-dark">
        <tr class="table-header-row">
          <th class="table-head">Year</th>
          <th class="table-head">Conversation</th>
          <th class="table-head">Positive</th>
          <th class="table-head">Negative</th>
          <th class="table-head">Neutral</th>
          <th class="table-head">Compound</th>
          <th class="table-head">Class</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

{% endblock %}